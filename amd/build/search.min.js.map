{"version":3,"file":"search.min.js","sources":["../src/search.js"],"sourcesContent":["const IDENTIFIERS = {\n    SEARCHINPUT: 'downloadcenter-search-input',\n    FORM: '#region-main form.mform',\n    FORMELEMENTS: '.fitem',\n    TOPICS: '.card.block',\n    CHECKBOX: 'input[type=\"checkbox\"]',\n    TITLE: 'label .itemtitle span:not(.badge)',\n    RESULTSHOLDER: 'downloadcenter-search-results',\n    RESULTSCOUNT: 'downloadcenter-search-results-count'\n};\n\nconst allCmsPerTopic = [];\nconst c = window.console;\nlet resultsHolder = null;\nlet resultsCount = null;\n\n\nconst search = (e) => {\n    c.log('Searching...', e.target.value);\n    const searchValue = e.target.value.toLowerCase();\n    const showAll = searchValue.length === 0;\n    let resultscount = 0;\n    allCmsPerTopic.forEach(topic => {\n        let foundInTopic = false;\n        topic.cms.forEach(cm => {\n            if (cm.title.indexOf(searchValue) > -1 || showAll) {\n                foundInTopic = true;\n                resultscount++;\n                cm.visible = true;\n                cm.elem.classList.remove('d-none');\n            } else {\n                cm.visible = false;\n                cm.elem.classList.add('d-none');\n            }\n        });\n        if (foundInTopic) {\n            topic.visible = true;\n            topic.elem.classList.remove('d-none');\n        } else {\n            topic.visible = false;\n            topic.elem.classList.add('d-none');\n        }\n    });\n    if (!showAll) {\n        resultsCount.textContent = resultscount;\n        resultsHolder.classList.remove('d-none');\n    } else {\n        resultsHolder.classList.add('d-none');\n    }\n};\n\nconst submitForm = () => {\n    allCmsPerTopic.forEach(topic => {\n        if (!topic.visible && topic.checkbox.checked) {\n            topic.checkbox.checked = false;\n        }\n        topic.cms.forEach(cm => {\n            if (!cm.visible && cm.checkbox.checked) {\n                cm.checkbox.checked = false;\n            }\n        });\n    });\n    return true;\n};\n\nexport const init = () => {\n    const searchInput = document.getElementById(IDENTIFIERS.SEARCHINPUT);\n    searchInput.addEventListener('input', search);\n    const form = document.querySelector(IDENTIFIERS.FORM);\n    const topics = form.querySelectorAll(IDENTIFIERS.TOPICS);\n    resultsHolder = document.getElementById(IDENTIFIERS.RESULTSHOLDER);\n    resultsCount = document.getElementById(IDENTIFIERS.RESULTSCOUNT);\n    form.addEventListener('submit', submitForm);\n    topics.forEach(topic => {\n        const elements = topic.querySelectorAll(IDENTIFIERS.FORMELEMENTS);\n        const topicObj = {};\n        topicObj.elem = topic;\n        topicObj.cms = [];\n        topicObj.visible = true;\n        topicObj.checkbox = topic.querySelector(IDENTIFIERS.CHECKBOX);\n        elements.forEach(element => {\n            const title = element.querySelector(IDENTIFIERS.TITLE);\n            if (title) {\n                const cmObj = {};\n                cmObj.title = title.textContent.toLowerCase();\n                cmObj.elem = element;\n                cmObj.visible = true;\n                cmObj.checkbox = element.querySelector(IDENTIFIERS.CHECKBOX);\n                topicObj.cms.push(cmObj);\n            }\n        });\n        allCmsPerTopic.push(topicObj);\n    });\n};"],"names":["IDENTIFIERS","allCmsPerTopic","c","window","console","resultsHolder","resultsCount","search","e","log","target","value","searchValue","toLowerCase","showAll","length","resultscount","forEach","topic","foundInTopic","cms","cm","title","indexOf","visible","elem","classList","remove","add","textContent","submitForm","checkbox","checked","_exports","init","document","getElementById","addEventListener","form","querySelector","topics","querySelectorAll","elements","topicObj","element","cmObj","push"],"mappings":"kJAAA,MAAMA,wBACW,8BADXA,iBAEI,0BAFJA,yBAGY,SAHZA,mBAIM,cAJNA,qBAKQ,yBALRA,kBAMK,oCANLA,0BAOa,gCAPbA,yBAQY,sCAGZC,eAAiB,GACjBC,EAAIC,OAAOC,QACjB,IAAIC,cAAgB,KAChBC,aAAe,KAGnB,MAAMC,OAAUC,IACZN,EAAEO,IAAI,eAAgBD,EAAEE,OAAOC,OAC/B,MAAMC,YAAcJ,EAAEE,OAAOC,MAAME,cAC7BC,QAAiC,IAAvBF,YAAYG,OAC5B,IAAIC,aAAe,EACnBf,eAAegB,SAAQC,QACnB,IAAIC,cAAe,EACnBD,MAAME,IAAIH,SAAQI,KACVA,GAAGC,MAAMC,QAAQX,cAAgB,GAAKE,SACtCK,cAAe,EACfH,eACAK,GAAGG,SAAU,EACbH,GAAGI,KAAKC,UAAUC,OAAO,YAEzBN,GAAGG,SAAU,EACbH,GAAGI,KAAKC,UAAUE,IAAI,UAC1B,IAEAT,cACAD,MAAMM,SAAU,EAChBN,MAAMO,KAAKC,UAAUC,OAAO,YAE5BT,MAAMM,SAAU,EAChBN,MAAMO,KAAKC,UAAUE,IAAI,UAC7B,IAECd,QAIDT,cAAcqB,UAAUE,IAAI,WAH5BtB,aAAauB,YAAcb,aAC3BX,cAAcqB,UAAUC,OAAO,UAGnC,EAGEG,WAAaA,KACf7B,eAAegB,SAAQC,SACdA,MAAMM,SAAWN,MAAMa,SAASC,UACjCd,MAAMa,SAASC,SAAU,GAE7Bd,MAAME,IAAIH,SAAQI,MACTA,GAAGG,SAAWH,GAAGU,SAASC,UAC3BX,GAAGU,SAASC,SAAU,EAC1B,GACF,KAEC,GA+BTC,SAAAC,KA5BkBA,KACIC,SAASC,eAAepC,yBAChCqC,iBAAiB,QAAS9B,QACtC,MAAM+B,KAAOH,SAASI,cAAcvC,kBAC9BwC,OAASF,KAAKG,iBAAiBzC,oBACrCK,cAAgB8B,SAASC,eAAepC,2BACxCM,aAAe6B,SAASC,eAAepC,0BACvCsC,KAAKD,iBAAiB,SAAUP,YAChCU,OAAOvB,SAAQC,QACX,MAAMwB,SAAWxB,MAAMuB,iBAAiBzC,0BAClC2C,SAAW,CAAA,EACjBA,SAASlB,KAAOP,MAChByB,SAASvB,IAAM,GACfuB,SAASnB,SAAU,EACnBmB,SAASZ,SAAWb,MAAMqB,cAAcvC,sBACxC0C,SAASzB,SAAQ2B,UACb,MAAMtB,MAAQsB,QAAQL,cAAcvC,mBACpC,GAAIsB,MAAO,CACP,MAAMuB,MAAQ,CAAA,EACdA,MAAMvB,MAAQA,MAAMO,YAAYhB,cAChCgC,MAAMpB,KAAOmB,QACbC,MAAMrB,SAAU,EAChBqB,MAAMd,SAAWa,QAAQL,cAAcvC,sBACvC2C,SAASvB,IAAI0B,KAAKD,MACtB,KAEJ5C,eAAe6C,KAAKH,SAAS,GAC/B,CACJ"}