define("local_downloadcenter/search",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;const IDENTIFIERS_SEARCHINPUT="downloadcenter-search-input",IDENTIFIERS_FORM="#region-main form.mform",IDENTIFIERS_FORMELEMENTS=".fitem",IDENTIFIERS_TOPICS=".card.block",IDENTIFIERS_CHECKBOX='input[type="checkbox"]',IDENTIFIERS_TITLE="label .itemtitle span:not(.badge)",IDENTIFIERS_RESULTSHOLDER="downloadcenter-search-results",IDENTIFIERS_RESULTSCOUNT="downloadcenter-search-results-count",allCmsPerTopic=[];let resultsHolder=null,resultsCount=null;const search=e=>{const searchValue=e.target.value.toLowerCase(),showAll=0===searchValue.length;let resultscount=0;allCmsPerTopic.forEach((topic=>{let foundInTopic=!1;topic.cms.forEach((cm=>{cm.title.indexOf(searchValue)>-1||showAll?(foundInTopic=!0,resultscount++,cm.visible=!0,cm.elem.classList.remove("d-none")):(cm.visible=!1,cm.elem.classList.add("d-none"))})),foundInTopic?(topic.visible=!0,topic.elem.classList.remove("d-none")):(topic.visible=!1,topic.elem.classList.add("d-none"))})),showAll?resultsHolder.classList.add("d-none"):(resultsCount.textContent=resultscount,resultsHolder.classList.remove("d-none"))},submitForm=()=>(allCmsPerTopic.forEach((topic=>{!topic.visible&&topic.checkbox.checked&&(topic.checkbox.checked=!1),topic.cms.forEach((cm=>{!cm.visible&&cm.checkbox.checked&&(cm.checkbox.checked=!1)}))})),!0);_exports.init=()=>{document.getElementById(IDENTIFIERS_SEARCHINPUT).addEventListener("input",search);const form=document.querySelector(IDENTIFIERS_FORM),topics=form.querySelectorAll(IDENTIFIERS_TOPICS);resultsHolder=document.getElementById(IDENTIFIERS_RESULTSHOLDER),resultsCount=document.getElementById(IDENTIFIERS_RESULTSCOUNT),form.addEventListener("submit",submitForm),topics.forEach((topic=>{const elements=topic.querySelectorAll(IDENTIFIERS_FORMELEMENTS),topicObj={};topicObj.elem=topic,topicObj.cms=[],topicObj.visible=!0,topicObj.checkbox=topic.querySelector(IDENTIFIERS_CHECKBOX),elements.forEach((element=>{const title=element.querySelector(IDENTIFIERS_TITLE);if(title){const cmObj={};cmObj.title=title.textContent.toLowerCase(),cmObj.elem=element,cmObj.visible=!0,cmObj.checkbox=element.querySelector(IDENTIFIERS_CHECKBOX),topicObj.cms.push(cmObj)}})),allCmsPerTopic.push(topicObj)}))}}));

//# sourceMappingURL=search.min.js.map